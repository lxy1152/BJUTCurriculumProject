# 编译原理大作业

## 说明
因为有人询问我关于编译课设的问题，我发现这个README文件的内容有些简单。所以在此添加说明。<br>说明这一部分的内容添加于2020年6月8日，题目及以后的内容为原文。
1. 有些内容我是直接修改的`lex.yy.c`文件，而忘记修改`ll.l`文件了，比如`lex.yy.c`文件中的种别值
2. 我现在也并不清楚为什么种别值的内容被注释了
3. 每个txt文件保存一个段码段，这意味着如果我要查看别的txt文件的结果，我都要修改代码中的文件路径并重新编译运行，这样的做法并不好，建议你自己修改。下文所说的`filepath`指的就是某一个txt文件的路径
4. 这个实验的流程包括词法、语法分析以及三地址代码生成。在演示的时候，这三者并不是孤立的进行演示的，而是合并起来进行演示。每次运行时，他们的输入就是一个txt文件。其流程见`test.c`文件
5. 词法、语法分析后提供语法分析树，使用该分析树得到三地址代码
6. 编译的时候应该要删除`ll.l`和`analys.y`文件，他们的作用是生成其他文件，但编译的时候并不需要他们
7. 我觉得三地址代码生成可以和语法分析的`analys.y`文件写在一起
8. `getToken`函数和`setFile`函数中都涉及了文件路径，以我目前的角度来看，应该只需要`setFile`函数来设置文件路径即可，并不清楚当时为什么这么写
9. 运行的时候，三地址代码前的编号确实就是不连续的，这个问题我并没有解决，而且答辩演示的时候老师也并没有提这个问题，所以不修改就这么用也完全可以。一个学弟跟我说这可能是因为树的某些无用分支也被遍历所导致的结果
10. 因为使用了`strcpy`函数，所以vs会报错，这个问题自己网上查查吧，都有解决方案

## 题目

C语言实现词语分析、语法分析以及三地址代码生成

## 截图

![](/Compile/example/taddr.jpg)

## 简述

1. 词法分析与语法分析使用flex和bison自动生成，三地址代码是我自己写的（但好像可以合并），flexbison的使用说明详见/doc/flex-bison_zh.pdf文件
2. 虽然是cpp文件，但是使用的是C语言​

## 环境

VisualStudio2017

## 使用

1. 编写你自己的myflex.l文件或者打开/src/ll.l文件，将`filein=fopen("filepath","r");`中的`filepath`修改为你自己的测试文件路径。编写你自己的mybison.y文件或者使用/src/analys.y文件
2. flex与bison在win_flex_bison-latest目录下，使用方法自己找吧，年代久远我也记不清了
3. 源码在src目录下，添加到你的工程中编译执行即可​

## 实验要求

实验要求详见/doc/requirements.pdf文件

## 测试

测试文件可以使用/test/test.txt文件或者参考实验要求中的样例